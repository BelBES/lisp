% -*- coding: utf-8 -*-
% Явные эндогенные вычисления
\begin{tikzpicture}
  \tikzstyle{every node}=[font=\small]

\input{figures/fig9.macros}

\begin{scope}[xshift = +5.875em]
  \draw [semithick] ( -5.875em, +5.25em) -- ( -5.875em, -5.75em);
  \draw [semithick] (+14.875em, +5.25em) -- (+14.875em, +4.00em);
  \draw [semithick] (+14.875em, -4.00em) -- (+14.875em, -5.75em);
  \node at(0.0em, 0.0em) {\begin{code:lisp}
(compile-file ...)







(factorial 5) |\is| 120 |\ii{или}| #<|\ic{ошибка}|>
  \end{code:lisp}};
\end{scope}

\draw [->] (7.80em, 4.125em) -- (7.80em, 3.0em) -- (13.75em, 3.0em);

\begin{scope}[xshift = 14em, yshift = 0.0em]
  \begin{scope}[xshift = 10.25em]
    \framenode{10.25em}{4.0em} {\begin{code:lisp}
(eval-in-abbreviation-world
  (define (fact ...) ...) )

(define-abbreviation (factorial ...) ...)

(define (some-facts) ...)
    \end{code:lisp}};
  \end{scope}
\end{scope}


\end{tikzpicture}
