% -*- coding: utf-8 -*-
% Варианты использования макросов
\begin{tikzpicture}
  \tikzstyle{every node}=[font=\footnotesize]

\input{figures/fig9.macros}

\begin{scope}[yshift = +7.5em]
  \module{M1}{7em}{Модуль, использующий \Meroon}
\begin{scope}[xshift = 3.0em]
  \draw (0.25em, 0.0em) -- (2.60em, 0.0em);
\begin{scope}[xshift = 3.95em]
  \binarydouble{\MeroonlibU{libexp3}{0.5em}}{prepare}{2.6em}
\begin{scope}[xshift = 1.35em]
  \draw [->] (0.0em, 0.0em) -- (2.75em, 0.0em);
\begin{scope}[xshift = 4.85em]
  \binarydown{\raisebox{-0.2ex}{M1}}{2.6em}
\end{scope}\end{scope}\end{scope}\end{scope}
  \begin{scope}[xshift = 24.0em, yshift = 1.5em]
    \node at (1.5em, 2.45em) {\emph{приложение}};
    \binarydown{\raisebox{-0.2ex}{M1}}{2.6em}
    \begin{scope}[xshift = 2.12em, yshift = -3.00em]
      \binaryup{\MeroonlibU{librun}{0.75em}}{2.6em}
    \end{scope}
  \end{scope}
\end{scope}

\begin{scope}[yshift = -3.5em]
  \module{M2}{7em}{Интерпретатор с~поддержкой \Meroon}
\begin{scope}[xshift = 3.0em]
  \draw (0.25em, 0.0em) -- (2.25em, 0.0em);
\begin{scope}[xshift = 3.95em]
  \binaryright{prepare}{2.6em}
\begin{scope}[xshift = 2.1em]
  \draw [->] (0.125em, 0.0em) -- (2.00em, 0.0em);
\begin{scope}[xshift = 4.10em]
  \binarydown{\raisebox{-0.2ex}{M2}}{2.6em}
\end{scope}\end{scope}\end{scope}\end{scope}
  \begin{scope}[xshift = 25.0em, yshift = 0.25em]
    \node at (0em,-4.75em) {\emph{приложение}};
    \binarydouble{prepare}{\raisebox{-0.2ex}{M2}}{2.6em};
    \begin{scope}[xshift = 3.40em, yshift = -0.745em]
      \binaryup{\MeroonlibU{librun}{0.75em}}{2.6em}
    \end{scope}
    \begin{scope}[xshift = -3.40em, yshift = -0.745em]
      \binaryup{\MeroonlibU{libexp3}{0.50em}}{2.6em}
    \end{scope}
  \end{scope}
\end{scope}

\end{tikzpicture}
